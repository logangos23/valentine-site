<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>

  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

    body {
      margin: 0;
      height: 100vh;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, #ffe1ea, #fff7fb);
      overflow: hidden;
    }

    .card {
      width: min(520px, calc(100% - 32px));
      background: white;
      border-radius: 20px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(0,0,0,.12);
      text-align: center;
      position: relative;
      z-index: 1;
    }

    h1 { margin: 0 0 20px; font-size: 32px; }

    .buttons {
      display: flex;
      gap: 14px;
      justify-content: center;
      align-items: center;
    }

    button {
      font-size: 18px;
      padding: 12px 20px;
      border-radius: 999px;
      border: 0;
      cursor: pointer;
      transition: transform .08s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    button:active { transform: scale(0.98); }

    #yes { background: #ff4d7d; color: white; }
    #no  { background: #e9e9ef; color: #222; }

    .msg { margin-top: 16px; font-size: 18px; }
  </style>
</head>

<body>
  <div class="card">
    <h1>Will you be my valentine? ðŸ’˜</h1>

    <div class="buttons">
      <button id="yes">Yes!</button>
      <button id="no">NoðŸ˜”</button>
    </div>

    <div class="msg" id="msg"></div>
  </div>

  <script>
    const yes = document.getElementById("yes");
    const no = document.getElementById("no");
    const msg = document.getElementById("msg");

    // Track mouse position
    const mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    window.addEventListener("mousemove", (e) => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    // Utility
    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

    // Physics-ish settings (tweak these)
    const CONFIG = {
      repelRadius: 140,   // how close before it starts running
      maxSpeed: 12,       // top speed
      accel: 1.1,         // acceleration strength
      friction: 0.95,     // lower = more slippery, higher = more floaty
      padding: 16         // keep it away from screen edges
    };

    let active = false;
    let pos = { x: 0, y: 0 };    // top-left position of the button
    let vel = { x: 0, y: 0 };

    function activateFixedPositionOnce() {
      if (active) return;
      active = true;

      // Convert current in-layout position to fixed coords (so it starts next to YES)
      const r = no.getBoundingClientRect();
      no.style.position = "fixed";
      no.style.left = `${r.left}px`;
      no.style.top = `${r.top}px`;

      pos.x = r.left;
      pos.y = r.top;
    }

    // Confetti (no external libraries)
    function confettiBurst() {
      const count = 170;
      const duration = 1400;

      // Burst from the YES button
      const r = yes.getBoundingClientRect();
      const originX = r.left + r.width / 2;
      const originY = r.top + r.height / 2;

      for (let i = 0; i < count; i++) {
        const piece = document.createElement("div");
        piece.style.position = "fixed";
        piece.style.left = originX + "px";
        piece.style.top = originY + "px";
        piece.style.width = (6 + Math.random() * 6) + "px";
        piece.style.height = (8 + Math.random() * 10) + "px";
        piece.style.borderRadius = "2px";
        piece.style.pointerEvents = "none";
        piece.style.zIndex = "9999";
        piece.style.opacity = "1";
        piece.style.background = `hsl(${Math.random() * 360}, 90%, 60%)`;

        document.body.appendChild(piece);

        const angle = Math.random() * Math.PI * 2;
        const power = 220 + Math.random() * 380;

        const dx = Math.cos(angle) * power;
        const dy = Math.sin(angle) * power;

        const gravity = 420 + Math.random() * 260;
        const spin = (Math.random() * 720 - 360);

        piece.animate([
          { transform: "translate(0,0) rotate(0deg)", opacity: 1 },
          { transform: `translate(${dx}px, ${dy + gravity}px) rotate(${spin}deg)`, opacity: 0 }
        ], {
          duration: duration + Math.random() * 600,
          easing: "cubic-bezier(.15,.8,.2,1)",
          fill: "forwards"
        });

        setTimeout(() => piece.remove(), duration + 800);
      }
    }

    yes.addEventListener("click", () => {
      msg.textContent = "Yay!! ðŸ¥°ðŸ’";
      confettiBurst();
      no.style.display = "none";
    });

    // If the cursor gets near the button, "activate" the fleeing behavior
    window.addEventListener("mousemove", () => {
      if (no.style.display === "none") return;

      const r = no.getBoundingClientRect();
      const cx = r.left + r.width / 2;
      const cy = r.top + r.height / 2;
      const d = Math.hypot(mouse.x - cx, mouse.y - cy);

      if (d < CONFIG.repelRadius) activateFixedPositionOnce();
    });

    // Main animation loop
    function tick() {
      if (active && no.style.display !== "none") {
        const r = no.getBoundingClientRect();
        const cx = pos.x + r.width / 2;
        const cy = pos.y + r.height / 2;

        const dx = cx - mouse.x;
        const dy = cy - mouse.y;
        const dist = Math.hypot(dx, dy) || 0.0001;

        // When close, accelerate away from cursor (stronger the closer you get)
        if (dist < CONFIG.repelRadius) {
          const strength = (1 - dist / CONFIG.repelRadius); // 0..1
          const ax = (dx / dist) * CONFIG.accel * (1 + 2.2 * strength);
          const ay = (dy / dist) * CONFIG.accel * (1 + 2.2 * strength);
          vel.x += ax;
          vel.y += ay;
        }

        // Apply friction
        vel.x *= CONFIG.friction;
        vel.y *= CONFIG.friction;

        // Cap speed
        const speed = Math.hypot(vel.x, vel.y);
        if (speed > CONFIG.maxSpeed) {
          vel.x = (vel.x / speed) * CONFIG.maxSpeed;
          vel.y = (vel.y / speed) * CONFIG.maxSpeed;
        }

        // Update position
        pos.x += vel.x;
        pos.y += vel.y;

        // Keep on-screen
        const minX = CONFIG.padding;
        const minY = CONFIG.padding;
        const maxX = window.innerWidth - r.width - CONFIG.padding;
        const maxY = window.innerHeight - r.height - CONFIG.padding;

        pos.x = clamp(pos.x, minX, maxX);
        pos.y = clamp(pos.y, minY, maxY);

        no.style.left = `${pos.x}px`;
        no.style.top = `${pos.y}px`;
      }

      requestAnimationFrame(tick);
    }

    // Re-clamp on resize
    window.addEventListener("resize", () => {
      if (!active || no.style.display === "none") return;
      const r = no.getBoundingClientRect();
      pos.x = clamp(pos.x, CONFIG.padding, window.innerWidth - r.width - CONFIG.padding);
      pos.y = clamp(pos.y, CONFIG.padding, window.innerHeight - r.height - CONFIG.padding);
      no.style.left = `${pos.x}px`;
      no.style.top = `${pos.y}px`;
    });

    tick();
  </script>
</body>
</html>
